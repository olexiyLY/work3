<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="styles.css">
	</head>
	<body style="background:#e3e1e1; margin-bottom:50px ;">
		<div style="margin-left:30%; margin-right:30%; background:#ffffff;">
			<div style="margin-left:5%; margin-right:5%;">
			<h1 align="center">Что такое bash / shell</h1>
			<h4>И то, и другое — интерпретаторы командной строки в линуксе. То есть если вы откроете командную строку и введете любую команду, да хоть:</h4>
			<div style="background:#e3e1e1;" class="bus">cd /home </div>
			<h4>То именно интерпретатор ее расшифрует и скажет компьютеру «он хочет перейти в директорию /home». Компьютер ведь не понимает команды на русском / английском языке. Ему нужны байтики. Этим и занимается интерпретатор — переводом с «нашего» на «компьютерный» язык.</h4>
			<img src="https://habrastorage.org/getpro/habr/upload_files/047/ddc/92f/047ddc92fa3f0d44cb6dbea0a8f1c0ac.png">
			<h4>Так что «cd /home» — это shell-команда! Или bash. Смотря какой интерпретатор установлен в вашей системе. В каждой операционной системе установлен интерпретатор по умолчанию. У них есть какие-то различия, но есть и набор базовых команд, которые понимают все: cd, mv, cp, ls… (в винде эти команды немного другие)</h4>
			<h4>А что такое shell-скрипт тогда? Это просто текстовый документ, внутри которого написан набор команд! Это не обязательно должны быть «сложные» команды, которые делают что-то супер-навороченное. Это любые команды, которые вы выполняете в консоли.</h4>
			<div style="background:#e3e1e1;" class="bus">См также:

			Основные linux-команды для новичка — что можно выполнять в консоли</div>
			<h4>Например, создадим скриптик, который создаст директорию и в ней файлик:</h4>
			<div style="background:#e3e1e1;" class="bus">mkdir /home/test

			cd /home/test

			touch test.txt
			</div>
			<h4>Так, команды записали, осталось сохранить их в файлик. Скрипты хранят в файлах с расширением .sh, поэтому назовем файл first_script.sh. Но есть нюанс — линуксу плевать на ваше расширение файла. Его может вообще не быть, и все равно скрипт останется скриптом. Почему? Потому что у любого скрипта в первой строке должен содержаться путь к интерпретатору. Например:</h4>
			<div style="background:#e3e1e1;" class="bus">#!/bin/bash

			или

			#!/bin/sh</div>
			<h4>Весь файл целиком:</h4>
			<div style="background:#e3e1e1;" class="bus">#!/bin/bash

			mkdir /home/test

			cd /home/test

			touch test.txt</div>
			<img src="https://habrastorage.org/getpro/habr/upload_files/1bb/ddc/754/1bbddc754a640e52940533768dbba8df.png">
			<h4>И даже если у такого файла не будет расширения вовсе, его можно будет запустить как скрипт:</h4>
			<div style="background:#e3e1e1;" class="bus">sh first_script
			# Проверяем директорию /home — там появилась папка test с файлом test.txt внутри.</div>
			<h4>Расширение .sh ставится для понимания человеком. Зашел в директорию:</h4>
			<h4>— Ага, что тут у нас? Файлы sh, скрипты какие-то лежат...</h4>
			<h4>Скрипты могут быть простые, а могут быть сложные. Вот, например, в одном проекте мы вначале вручную обновляли тестовые платформы. Для обновления надо:
			</h4>
			<h4>1. Остановить сервис.</h4>
			<h4>2. Переподложить war-файл с приложением (лежат они в директории /opt)
			</h4>
			<h4>3. Запустить сервис</h4>
			<h4>Сервиса два, допустим это test и cloud. Так что шагов уже 6.
			</h4>
			<h4>Когда обновлять вручную надоело, мы положили на все линукс машины простой скриптик:</h4>
			<div style="background:#e3e1e1; padding-top: 2%; padding-bottom: 2%; padding-left: 5%; padding-right: 5%;" class="bus">#!/bin/bash

			service test stop
			cp test.war /opt/jboss-test/bin
			service test start

			service cloud stop
			cp cloud.war /opt/jboss-cloud/bin
			service cloud start</div>
			<h4>Собираешь приложение, подкладываешь к скриптику и запускаешь 1 команду вместо 6. Удобно! Это называется «автоматизация рутины» =)</h4>
			<h4>Другой пример с того же проекта — мы делали серверное приложение. И во время установки приложения на сервере linux нужно выполнить пункты по настройке самой системы. Например, увеличить параметр max_map_count — сколько максимум памяти может использовать процесс.</h4>
			<h4>Приложение в пике работы требует много памяти. Если не настроить параметр, то «тяжеловесная» задача просто упадет с ошибкой «Не хватает памяти». И если мы видим такую ошибку, то в первую очередь идем проверять настройки системы.</h4>
			<h4>Вообще, если вы отдаете установку приложения на откуп «чужим» админам, лучше потом проверять — а всё ли настроено верно? Конечно, обычно на production (машина, с которой работают реальные пользователи) настраивают всё внимательно, это на тестовых стендах могут что-то пропустить... Но лучше перебдеть!</h4>
			<img src="https://habrastorage.org/getpro/habr/upload_files/f9a/2ef/8ac/f9a2ef8accae1d03d9f99ea4a6997aae.png">
			</div>
		</div>
	</body>
</html>